{"ast":null,"code":"import _asyncToGenerator from\"/Users/vitto/Documents/PERSONAL/intern/meyd-project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/vitto/Documents/PERSONAL/intern/meyd-project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/vitto/Documents/PERSONAL/intern/meyd-project/client/node_modules/@babel/runtime/regenerator/index.js\";import{React,useEffect}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import{useState}from\"react\";import\"./maker.scss\";import axios from\"axios\";import ReactQuill from\"react-quill\";import'react-quill/dist/quill.snow.css';import emailjs from'emailjs-com';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Submission(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setJob=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),template_params=_useState4[0],setTemplateParams=_useState4[1];var location=useLocation();var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),err=_useState6[0],setError=_useState6[1];var postId=location.pathname.split(\"/\")[2];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),cost=_useState10[0],setCost=_useState10[1];var navigate=useNavigate();var handleSubmit=function handleSubmit(e){e.preventDefault();var templateParams={reply_to:post.email_address,to_name:post.first_name+\" \"+post.last_name,message:message,cost:cost};console.log(templateParams);emailjs.send('service_ohzkr9u','template_lzii547',templateParams,'nU9i0WcIZCiN5Ms-C').then(function(response){console.log('SUCCESS!',response);setTemplateParams({reply_to:'',to_name:'',message:'',cost:\"0\"});navigate(\"/success-request\");},function(error){// console.log('FAILED...', error);\nsetError(\"Error :\"+error);});};useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/posts/\".concat(postId));case 3:res=_context.sent;setJob(res.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[postId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container-job\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section__title\",children:\"MEYD.IT\"}),/*#__PURE__*/_jsx(\"span\",{className:\"section__subtitle\",children:\"fashion made especially for you\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"jobs\",id:\"jobs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"jobs__item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"jobs__column \",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/upload/\".concat(post.images),className:\"sample_img \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"jobs__info\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"home_heading\",children:[\"JOB ID NUMBER # \",post.id]}),/*#__PURE__*/_jsxs(\"span\",{className:\"job__title\",name:\"user_name\",children:[post.first_name,\" \",post.last_name]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"job-label-cont\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"label-job\",children:\"Type of clothing\"}),/*#__PURE__*/_jsx(\"p\",{className:\"jobs__details-item jobs__text-item\",children:post.clothing_type})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"job-label-cont\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"label-job\",children:\"Budget\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"jobs__details-item jobs__text-item\",children:[post.budget,\" AUD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"job-label-cont\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"label-job\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"p\",{className:\"jobs__details-item jobs__text-item\",name:\"user_email\",children:post.email_address})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"job-label-cont\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"label-job\",children:\"Location\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"jobs__details-item jobs__text-item\",children:[post.street_num,\" \",post.streetname,\" , \",post.state_name,\" \",post.post_code]})]})]})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"description-label\",children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"jobs__details-item\",children:post.description})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"job_submission\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"section__subtitle2\",children:\"Submit a request\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"job-label-cont\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"label-job\",children:\"Maker Cost\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:function onChange(e){return setCost(e.target.value);},className:\"maker-cost\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(ReactQuill,{className:\"editor\",theme:\"snow\",name:\"message\",onChange:setMessage,value:message})]}),err&&/*#__PURE__*/_jsx(\"p\",{className:\"input-text error\",children:err}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleSubmit,className:\"email-submit\",children:\"submit\"})]})]});}export default Submission;","map":{"version":3,"sources":["/Users/vitto/Documents/PERSONAL/intern/meyd-project/client/src/pages/Maker/Submission.jsx"],"names":["React","useEffect","useLocation","useNavigate","useState","axios","ReactQuill","emailjs","Submission","post","setJob","template_params","setTemplateParams","location","err","setError","postId","pathname","split","message","setMessage","cost","setCost","navigate","handleSubmit","e","preventDefault","templateParams","reply_to","email_address","to_name","first_name","last_name","console","log","send","then","response","error","fetchData","get","res","data","images","id","clothing_type","budget","street_num","streetname","state_name","post_code","description","target","value"],"mappings":"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","sourcesContent":["import { React, useEffect } from \"react\";\nimport { useLocation , useNavigate} from \"react-router-dom\";\nimport { useState } from \"react\";\nimport \"./maker.scss\";\nimport axios from \"axios\";\nimport ReactQuill from \"react-quill\";\nimport 'react-quill/dist/quill.snow.css';\nimport emailjs from 'emailjs-com';\n\n\n\n\nfunction Submission() {\n  const [post, setJob] = useState([]);\n  const [template_params, setTemplateParams] = useState();\n  const location = useLocation();\n  const[err,setError] = useState(null)\n  const postId = location.pathname.split(\"/\")[2];\n  const [message, setMessage] = useState();\n  const [cost, setCost] = useState();\n\n  const navigate = useNavigate();\n\n  const handleSubmit = (e) => {\n    \n    e.preventDefault();\n\n    const templateParams = {\n      reply_to : post.email_address,\n      to_name : post.first_name + \" \" +post.last_name,\n      message : message,\n      cost : cost\n    }\n \n    console.log(templateParams);\n\n    \n \n    emailjs.send('service_ohzkr9u', 'template_lzii547', templateParams, 'nU9i0WcIZCiN5Ms-C')\n      .then(response => {\n        console.log('SUCCESS!', response);\n        setTemplateParams({\n          reply_to: '',\n          to_name: '',\n          message: '',\n          cost:\"0\"\n        });\n        navigate(\"/success-request\")\n    \n      }, error => {\n        // console.log('FAILED...', error);\n        setError(\"Error :\"+error);\n      });\n  }\n  \n\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const res = await axios.get(`/posts/${postId}`);\n        setJob(res.data);\n  \n      } catch (err) {\n        console.log(err);\n      }\n    };\n    fetchData();\n  }, [postId]);\n\n  return (\n    <div className=\"container-job\">\n      <h2 className=\"section__title\">MEYD.IT</h2>\n      <span className=\"section__subtitle\">fashion made especially for you</span>\n      <div className=\"jobs\" id=\"jobs\">\n        <div className=\"jobs__item\">\n          <div className=\"jobs__column \">\n            <img src={`/upload/${post.images}`} className=\"sample_img \"></img>\n\n            <div className=\"jobs__info\">\n              <h5 className=\"home_heading\">JOB ID NUMBER # {post.id}</h5>\n            \n              <span className=\"job__title\" name=\"user_name\">\n                {post.first_name} {post.last_name}\n              </span>\n              <br></br>\n              <br></br>\n              \n              <div className=\"job-label-cont\">\n                <p className=\"label-job\">Type of clothing</p>\n                <p className=\"jobs__details-item jobs__text-item\">\n                  {post.clothing_type}\n                </p>\n              </div>\n              <div className=\"job-label-cont\">\n                <p className=\"label-job\">Budget</p>\n                <p className=\"jobs__details-item jobs__text-item\">\n                  {post.budget} AUD\n                </p>\n              </div>\n              <div className=\"job-label-cont\">\n                <p className=\"label-job\">Email Address</p>\n                <p className=\"jobs__details-item jobs__text-item\" name=\"user_email\">\n                  {post.email_address}\n                </p>\n              </div>\n              <div className=\"job-label-cont\">\n                <p className=\"label-job\">Location</p>\n                <p className=\"jobs__details-item jobs__text-item\">\n                  {post.street_num} {post.streetname} , {post.state_name}{\" \"}\n                  {post.post_code}\n                </p>\n              </div>\n            </div>\n          </div>\n          <h4 className=\"description-label\">Description</h4>\n          <p className=\"jobs__details-item\">{post.description}</p>\n        </div>\n        {/* <h2 className=\"section__title\">Submit a request :</h2>   */}\n\n        <section className=\"job_submission\" >\n          <h3 className=\"section__subtitle2\">Submit a request</h3>\n          <br></br>\n          <div className=\"job-label-cont\">\n      \n                <p className=\"label-job\">Maker Cost</p>\n             \n                <input type=\"number\"  onChange={(e)=>setCost(e.target.value)} className=\"maker-cost\"></input>\n          </div>\n          <br></br>\n          <ReactQuill className=\"editor\" theme=\"snow\" name=\"message\" onChange= {setMessage} value={message}></ReactQuill>\n        </section>\n        {err && <p className=\"input-text error\">{err}</p>}\n        <button type=\"submit\" onClick={handleSubmit} className=\"email-submit\">submit</button>\n\n        \n      </div>\n    </div>\n  );\n}\n\nexport default Submission;\n"]},"metadata":{},"sourceType":"module"}